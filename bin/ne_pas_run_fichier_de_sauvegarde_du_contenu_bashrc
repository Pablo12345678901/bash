#!/usr/bin/env bash

############################################
# Ci-dessous mon code perso.
# Contrôle pour ne pas run ce script par moi-même via mes commandes personnelles.
if [[ $0 =~ (-)?bash$ ]] # "-bash" est run au lancement et "bash" est run avec "exec bash -l" qui relance bash
then
    :
else
    CE_FICHIER="$0"
    COMMANDE_APPELEE=$(basename $CE_FICHIER) # Obtention du nom du fichier en supprimant le reste du path
    echo -e "\nErreur : vous ne devez pas run la commande (script) \"$COMMANDE_APPELEE\" car ce script est une copie du fichier bashrc sauvegardée dans le répertoire perso et sert uniquement à la sauvegarde pour être réutilisée en cas de changement d'environnement.\n"
    exit 1 # exit du fichier si ce n'est pas le shell qui le run à l'ouverture
    # c'est-à-dire : exit du fichier si je le run sous le nom donné ci-dessous en tant que commande du dossier personnel.
fi
# Ci-dessus mon code perso.
############################################



############################################
# Code original :
# System-wide .bashrc file for interactive bash(1) shells.
if [ -z "$PS1" ]; then
   return
fi

PS1='\h:\W \u\$ '
# Make bash check its window size after a process completes
shopt -s checkwinsize

[ -r "/etc/bashrc_$TERM_PROGRAM" ] && . "/etc/bashrc_$TERM_PROGRAM"
# Fin du code original
############################################



############################################
# Ci-dessous mon code perso.
: ${REPERTOIRE_DES_COMMANDES_PERSO:="/Users/pablo/Desktop/Developpement/bash/bin"} # fixe la variable si pas définie
: ${BASHRC_PATH:="/etc/bashrc"} # fixe la variable si pas définie
TITRE_FICHIER_SAUVEGARDE_BASHRC="ne_pas_run_fichier_de_sauvegarde_du_contenu_bashrc"
# Sauvegarde du profil dans le répertoire des commandes personnelles
{ cd $REPERTOIRE_DES_COMMANDES_PERSO &&
cp $BASHRC_PATH $TITRE_FICHIER_SAUVEGARDE_BASHRC && # sauvegarde du fichier dans le répertoire perso
cd $OLDPWD ; } || echo -e "Le fichier bashrc situé $BASHRC_PATH n'a pas pu être copié dans le répertoire perso.\nDébugger le fichier bashrc.\n" >&2 # cd $OLDPWD revient ou j'étais
############################################