#!/usr/bin/env bash

# Contrôle qu'un argument a été fourni au script
if [ -z "$1" ]
then
    echo -e "\nERREUR : aucun argument fourni."
    echo -e "\nSyntaxe :\n\t$(basename $0) MOT_SUR_LEQUEL_JE_SOUHAITERAIS_DE_L_INFORMATION\n"
    exit 1
else
    :
fi

# Résumé script :
# Le mot sur lequel je recherche de l'information peut être dans :
#       - builtins
#       - man
#       - si pas dans man alors recherche avec man -k


case $(type -t "$1") in
# type -t : affiche le type de commande
    "builtin" | "keyword" ) man bash | less -p "^       $1 " ;; # affiche la section du manuel qui contient le builtin recherché
    # less -p : demande à 'less' de débuter l'affichage à la première occurence du pattern.
    # les espaces après le début de ligne correspondent à un nombre d'espace lié à la pagination de manual.
    # Si le nombre d'espaces de manual varie, il faut le faire varier ici aussi.
    # Si pas builtins alors recherche de la page du manuel dédiée
    * ) {    man "$1" >/dev/null
            if (($?))
            then
                # Si pas de page manuel dédiée alors recherche avec man -k
                echo -e "\nAucune page de manuel existante.\nRecherche avec man -k $1.\n"
                man -k "$1"
            else
                man "$1" # affichage de la page du manuel si existante
            fi ; }
    ;; 
esac