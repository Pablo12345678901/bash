#!/usr/bin/env bash

# Liste des répertoires Git à adapter ici :
if [ -z $1 ]
then
    echo -e "\nErreur : vous n'avez pas saisi de nom pour le répertoire à push (ex : commande bash pour push le répertoire bash)\n"
    exit 1
else
    :
fi

# Adaptation du path du répertoire à push en fonction du paramètre fourni
if [ $1 == "bash" ]
then 
    REPERTOIRE_GIT_A_PUSH=${REPERTOIRE_DES_COMMANDES_PERSO%\/bin}
    echo $REPERTOIRE_GIT_A_PUSH
else
    : # éventuellement rajouter les autres répertoires au fur et à mesure ici et adapter à chaque fois le répertoire git à push avec le path complet selon le répertoire
fi

cd $REPERTOIRE_GIT_A_PUSH
#DEBUG pwd # DEBUG

#spécificité du répertoire Bash avec Git qui ne push pas le script car il le run.
if [ $PWD == ${REPERTOIRE_DES_COMMANDES_PERSO%\/bin} ] # Uniquement pour mon répertoire Git Bash
then
    git add  $REPERTOIRE_DES_COMMANDES_PERSO/git_commit_tout_sans_message # comme je run ce fichier il semblerait que Git ne le prenne pas d'office.
    echo "Rép bash" # DEBUG
else
    echo "Pas rép Bash"
fi

# Push du git
{ git add . && git status && git commit -m "-" && git push  && echo -e "\nCommit du répertoire BASH = OK\n" ; } || echo "Le commit du répertoire BASH n'a pas pu être correctement fait."

echo $PWD
cd $OLDPWD