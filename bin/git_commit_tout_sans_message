#!/usr/bin/env bash

# L'adaptation du path du répertoire Git à push se fait en fonction du paramètre fourni en ligne de commande.
if [ -z $1 ]
then
    echo -e "\nErreur : vous n'avez pas saisi de nom pour le répertoire à push (ex : commande bash pour push le répertoire bash)\n"
    exit 1
else
   REPERTOIRE_GIT_A_PUSH="$REPERTOIRE_DEVELOPPEMENT/$1"
   cd $REPERTOIRE_GIT_A_PUSH ||
   {    echo -e "\nErreur : le répertoire fournit en ligne de commande ne fait pas partie du répertoire \"developpement\" personnel."
        echo -e "\nDébugguer avec pwd dans le script et/ou relire la saisie.\n"
        exit 1 ; }
fi

#DEBUG pwd # DEBUG
#DEBUG open $PWD

# Spécificité avec le répertoire Bash avec Git qui ne push pas le script car il le run.
if [ $PWD == "$REPERTOIRE_DEVELOPPEMENT/bash" ] # Uniquement pour mon répertoire Git Bash
then
    git add  $REPERTOIRE_DES_COMMANDES_PERSO/git_commit_tout_sans_message # comme je run ce fichier il semblerait que Git ne le prenne pas d'office.
    #DEBUG echo "Rép bash" # DEBUG
else
    :
fi
echo $2
# Push du git
{   git add . &&
    git status &&
    if [ -z = "$2" ]
    then
        git commit -m "-"
    else
        git commit -m "$2"
    fi &&
    git push  && echo -e "\nCommit du répertoire $1 = OK\n" ; } || echo "Le commit du répertoire $1 n'a pas pu être correctement fait OU il n'y avait rien à push."

cd $OLDPWD